<html lang="en">
<head>
	<title>E-commerce</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&amp;display=swap" />
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Outfit:400,500,600,700,800,900&amp;subset=latin" />
	<link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />
	<link rel="stylesheet" href="css/styles.css">
	<link rel="icon" type="image/png" sizes="48x48" href="./favicon.png" />
</head>

<body>
	<!-- Placeholder para el header reutilizable -->
    <div id="header-placeholder"></div>
	
	<main class="d-flex align-items-center justify-content-center" style="min-height: calc(100vh - 120px);">
		<div class="container py-5">
			<div class="row justify-content-center">
				<div class="col-12 col-md-8 col-lg-6 col-xl-5">
					<div class="card shadow-lg p-4 p-md-5">
						<div class="card-body">
							<div class="mb-4 text-center">
								<h2 class="fw-bold">Crear una Cuenta</h2>
								<p class="text-muted">Regístrate para empezar a comprar</p>
							</div>

							<!-- Formulario de registro -->
							<form id="register-form">
								<div class="row">
									<div class="col-md-6 mb-3">
										<label class="form-label" for="nombre">Nombre*</label>
										<input class="form-control" id="nombre" name="nombre" type="text" placeholder="Juan" required />
									</div>
									<div class="col-md-6 mb-3">
										<label class="form-label" for="apellido">Apellido*</label>
										<input class="form-control" id="apellido" name="apellido" type="text" placeholder="Pérez" required />
									</div>
								</div>
								<div class="mb-3">
									<label class="form-label" for="fecha_nacimiento">Fecha de Nacimiento*</label>
									<input class="form-control" id="fecha_nacimiento" name="fecha_nacimiento" type="date" required />
								</div>
								<div class="mb-3">
									<label class="form-label" for="email">Email*</label>
									<input class="form-control" id="email" name="email" type="email" placeholder="juanperez@example.com" required />
								</div>
								<div class="mb-3">
									<label class="form-label" for="contraseña">Contraseña</label>
									<input class="form-control" id="contraseña" name="password" type="password" placeholder="********" required />
								</div>
								<div class="d-grid mb-3">
									<button class="btn btn-primary btn-lg" type="submit">Registrarse</button>
								</div>
								<div class="d-grid mb-4">
									<a class="btn btn-outline-secondary" href="#">
										<img class="me-2" src="https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_%22G%22_logo.svg" alt="Google" style="width: 1em; height: 1em; vertical-align: -0.125em;"/>
										Registrarse con Google
									</a>
								</div>
								<p class="text-center text-muted mb-0">
									¿Ya tienes una cuenta?
									<a class="fw-bold text-decoration-none" href="login.html">Inicia sesión</a>
								</p>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>

	<!-- Placeholder para el footer reutilizable -->
    <div id="footer-placeholder"></div>

	<script src="js/api.js"></script>
	<script>
		document.getElementById('register-form').addEventListener('submit', async function (event) {
			event.preventDefault();

			const nombre = document.getElementById('nombre').value;
			const apellido = document.getElementById('apellido').value;
			const fecha_nacimiento = document.getElementById('fecha_nacimiento').value;
			const email = document.getElementById('email').value;
			const password = document.getElementById('contraseña').value;

			try {
				const response = await fetch(`${API_BASE_URL}/register`, {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify({
						nombre: nombre,
						apellido: apellido,
						fecha_nacimiento: fecha_nacimiento,
						email: email,
						password: password,
					}),
				});

				if (response.status === 201) {
					alert('¡Registro exitoso! Ahora puedes iniciar sesión.');
					window.location.href = 'login.html';
				} else {
					const errorData = await response.json();
					alert('Error en el registro: ' + errorData.detail);
				}
			} catch (error) {
				console.error('Error:', error);
				alert('Ocurrió un error al intentar registrarse.');
			}
		});
	</script>
	<!-- Scripts de componentes reutilizables -->
	<script src="js/header.js"></script>
	<script src="js/logout.js"></script>
	<script src="js/burguer-button.js"></script>
	<script src="js/footer.js"></script>
</body>

</html>